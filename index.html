<!DOCTYPE html>
<html>
<head>
  <title>German Special Forces</title>
  <style>
    body {
      font-family: Arial;
      background: #111;
      color: white;
      padding: 30px;
    }
    h1 { color: #4CAF50; }
    button {
      padding: 8px 15px;
      margin: 5px 5px 5px 0;
      background: #4CAF50;
      border: none;
      color: white;
      cursor: pointer;
    }
    .section {
      margin-top: 20px;
      padding: 20px;
      background: #222;
      border-radius: 8px;
    }
    textarea {
      width: 100%;
      margin-top: 10px;
      padding: 8px;
      background: #333;
      color: white;
      border: none;
    }
    .hidden { display: none; }
  </style>
</head>
<body>

<h1>ðŸ‡©ðŸ‡ª German Special Forces Academy</h1>

<div id="login" class="section">
  <h2>Select User</h2>
  <button onclick="login('Asaf')">Asaf</button>
  <button onclick="login('Brother1')">Brother 1</button>
  <button onclick="login('Brother2')">Brother 2</button>
</div>

<div id="dashboard" class="hidden">

  <div class="section">
    <h2 id="welcome"></h2>
    <button onclick="logout()">Switch User</button>
  </div>

  <div class="section">
    <h2>Current Phase</h2>
    <p id="phase">Phase 1 â€“ A1 Foundation</p>
  </div>

  <div class="section">
    <h2>XP & Progress</h2>
    <p>XP: <span id="xp">0</span></p>
    <p>Homework Streak: <span id="streak">0</span></p>
    <button onclick="addXP(10)">+10 XP (Complete Exercise)</button>
    <button onclick="addXP(25)">+25 XP (Finish Lesson)</button>
  </div>

  <div class="section">
    <h2>This Week's Lesson</h2>
    <p>Week 1: Present tense + sentence structure.</p>
  </div>

  <div class="section">
    <h2>Homework</h2>
    <textarea id="homework" rows="6"></textarea>
    <button onclick="saveHomework()">Submit Homework (+20 XP)</button>
  </div>

  <div class="section">
    <h2>Leaderboard</h2>
    <div id="leaderboard"></div>
  </div>

</div>

<script>
let currentUser = null;
let users = ["Asaf","Brother1","Brother2"];

function login(name) {
  currentUser = name;
  document.getElementById("login").classList.add("hidden");
  document.getElementById("dashboard").classList.remove("hidden");
  document.getElementById("welcome").innerText = "Welcome, " + name;
  loadUser();
  updateLeaderboard();
}

function logout() {
  currentUser = null;
  document.getElementById("dashboard").classList.add("hidden");
  document.getElementById("login").classList.remove("hidden");
}

function loadUser() {
  document.getElementById("xp").innerText =
    localStorage.getItem("xp_" + currentUser) || 0;

  document.getElementById("streak").innerText =
    localStorage.getItem("streak_" + currentUser) || 0;

  document.getElementById("homework").value =
    localStorage.getItem("homework_" + currentUser) || "";
}

function addXP(amount) {
  let xp = parseInt(localStorage.getItem("xp_" + currentUser)) || 0;
  xp += amount;
  localStorage.setItem("xp_" + currentUser, xp);
  document.getElementById("xp").innerText = xp;
  updateLeaderboard();
}

function saveHomework() {
  localStorage.setItem("homework_" + currentUser,
    document.getElementById("homework").value);

  let streak = parseInt(localStorage.getItem("streak_" + currentUser)) || 0;
  streak += 1;
  localStorage.setItem("streak_" + currentUser, streak);
  document.getElementById("streak").innerText = streak;

  addXP(20);
}

function updateLeaderboard() {
  let ranking = users.map(user => {
    return {
      name: user,
      xp: parseInt(localStorage.getItem("xp_" + user)) || 0
    };
  });

  ranking.sort((a,b)=>b.xp-a.xp);

  let html = "";
  ranking.forEach((u,i)=>{
    html += `<p>${i+1}. ${u.name} â€“ ${u.xp} XP</p>`;
  });

  document.getElementById("leaderboard").innerHTML = html;
}
</script>

</body>
</html>
